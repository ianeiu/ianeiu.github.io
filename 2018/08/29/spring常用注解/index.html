<!DOCTYPE html>
<html lang="zh" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta name="generator" content="Hugo 0.46" />
  <meta charset="utf-8">
  <title>Spring常用注解 · IanEiU</title>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="属性注入 @Autowired 自动装配，可消除代码里的getter/setter与bean属性中的property 如果不使用注解自动注入，必须通过代码手动注入," />

  <meta name="keywords" content="Hugo, theme, ianeiu, 吴炜棉" />
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
<link rel="stylesheet" href="https://ianeiu.github.io/css/den.css">

<link rel="stylesheet" href="https://ianeiu.github.io/css/custom.css">




<meta property="og:title" content="Spring常用注解" />
<meta property="og:description" content="属性注入 @Autowired 自动装配，可消除代码里的getter/setter与bean属性中的property 如果不使用注解自动注入，必须通过代码手动注入," />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ianeiu.github.io/2018/08/29/spring%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3/" />



<meta property="article:published_time" content="2018-08-29T00:00:00&#43;00:00"/>

<meta property="article:modified_time" content="2018-08-29T00:00:00&#43;00:00"/>











<meta itemprop="name" content="Spring常用注解">
<meta itemprop="description" content="属性注入 @Autowired 自动装配，可消除代码里的getter/setter与bean属性中的property 如果不使用注解自动注入，必须通过代码手动注入,">


<meta itemprop="datePublished" content="2018-08-29T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2018-08-29T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="2148">



<meta itemprop="keywords" content="Spring,IOC,注解," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Spring常用注解"/>
<meta name="twitter:description" content="属性注入 @Autowired 自动装配，可消除代码里的getter/setter与bean属性中的property 如果不使用注解自动注入，必须通过代码手动注入,"/>
</head>
<body>
  
  <div class="header-container" style="background: linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2)), url('https://ianeiu.github.io/images/bg3.jpg'); background-position: center; background-size: cover;">
  <div class="container">
  <nav class="header-nav navbar navbar-expand-md navbar-dark light-dark">
    <div class="header-logo navbar-brand">
      
        <a class="float-left" href="https://ianeiu.github.io/">
      
        
        <img class="mr20 header-logo-image" src="https://ianeiu.github.io/images/avatar.ico" alt="logo">
        
        
          IanEiU
         
      </a>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="nav-menu collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        
          <li class="nav-item">
            
              
                <a class="nav-link" href="https://ianeiu.github.io/">All</a>
              
            
          </li>
        
          <li class="nav-item">
            
              
                <a class="nav-link" href="https://ianeiu.github.io/categories">分类</a>
              
            
          </li>
        
          <li class="nav-item">
            
              
                <a class="nav-link" href="https://ianeiu.github.io/tags">标签</a>
              
            
          </li>
        
          <li class="nav-item">
            
              
                <a class="nav-link" href="https://ianeiu.github.io/category/java/">Java</a>
              
            
          </li>
        
          <li class="nav-item">
            
              <a class="nav-link" href="https://ianeiu.github.io/about/">About</a>
            
          </li>
        
        
      </ul>
    </div>
  </nav>
</div>

<div class="container header-wrapper">
  <div class="row">
    <div class="col-lg-12">
      <div class="header-content">
        <h1 class="header-title">Spring常用注解</h1>
        <p class="header-date">作者：
          吴炜棉 /
        
        2018-08-29
          / 分类：
          <a href="https://ianeiu.github.io/category/spring/">Spring</a>
        </p>
        
        <div class="header-underline"></div>
        
          <div class="clearfix"></div>
          <p class="float-right header-tags">
              <i class="fas fa-tags" aria-hidden="true"></i>
              <a href="https://ianeiu.github.io/tag/ioc/">IOC</a>, 
                <a href="https://ianeiu.github.io/tag/spring/">Spring</a>, 
                <a href="https://ianeiu.github.io/tag/%E6%B3%A8%E8%A7%A3/">注解</a>
          </p>
        
        

      </div>
    </div>
  </div>
</div>

  </div>
<div class="container content">
  

<h2 id="属性注入">属性注入</h2>

<h3 id="autowired">@Autowired</h3>

<p>自动装配，可消除代码里的getter/setter与bean属性中的property</p>

<p>如果不使用注解自动注入，必须通过代码手动注入,如下：</p>

<pre><code>...
&lt;bean id=&quot;user&quot; class=&quot;xxx.User&quot; /&gt;
    &lt;property name=&quot;student&quot; ref=&quot;student&quot; /&gt;
&lt;/bean&gt;
&lt;bean id=&quot;student&quot; class=&quot;xxx.Student&quot; /&gt;
...

@Test
public void test(){
    //读取配置文件
    ApplicationContext ctx=new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);
    User user=(User) ctx.getBean(&quot;user&quot;);
}
</code></pre>

<p>而使用注解@Autowired大大减少了代码量，提高可读性。<br />
使用前配置文件要添加扫描器</p>

<pre><code>...
&lt;context:component-scan base-package=&quot;xxx.vo&quot; /&gt;
&lt;bean id=&quot;user&quot; class=&quot;xxx.User&quot; /&gt;
&lt;bean id=&quot;student&quot; class=&quot;xxx.Student&quot; /&gt;
...

class User{
    @Autowired
    private Student student;
    ...
}
</code></pre>

<p>注：当xml配置了user的属性时，Spring会按照xml优先的原则去User.java中寻找这两个属性的getter/setter，导致的结果就是初始化bean报错</p>

<pre><code>&lt;context:component-scan base-package=&quot;xxx.vo&quot; /&gt;
&lt;bean id=&quot;user&quot; class=&quot;xxx.User&quot;&gt;
    &lt;property name=&quot;student&quot; ref=&quot;student&quot; /&gt;
&lt;/bean&gt;
&lt;bean id=&quot;student&quot; class=&quot;xxx.Student&quot; /&gt;

class User{
    @Autowired
    private Student student;
    //无getter/setter
}
</code></pre>

<p>注：当xml未配置了student的bean时会抛出找不到bean的异常，可将@Autowired注解的required设置为false，默认student为null</p>

<pre><code>&lt;context:component-scan base-package=&quot;xxx.vo&quot; /&gt;
&lt;bean id=&quot;user&quot; class=&quot;xxx.User&quot; /&gt;

class User{
    @Autowired(required=false)
    private Student student;
    //无getter/setter
}
</code></pre>

<h3 id="qualifier">Qualifier</h3>

<p>指定注入Bean的名称</p>

<h3 id="resource">@Resource</h3>

<p>@Resource注解与@Autowired注解作用相似</p>

<pre><code>class User{
    @Resource(name=&quot;student&quot;)
    private Student student;

    //@Resource(type=&quot;Student.class&quot;)
    //private Student student;
    ...
}
</code></pre>

<p>@Resource的装配顺序：
(1)、@Resource后面没有任何内容，默认通过name属性去匹配bean，找不到再按type去匹配
(2)、指定了name或者type则根据指定的类型去匹配bean，任何一个不匹配都将报错</p>

<p>@Autowired和@Resource两个注解的区别：
(1)、@Autowired默认按照byType方式进行bean匹配，@Resource默认按照byName方式进行bean匹配
(2)、@Autowired是Spring的注解，@Resource是J2EE的注解</p>

<h2 id="获取参数">获取参数</h2>

<h3 id="requestparam">@RequestParam</h3>

<p><a href="http://localhost:8080/springmvc/hello/101?param1=10&amp;param2=20">http://localhost:8080/springmvc/hello/101?param1=10&amp;param2=20</a><br />
根据上面的这个URL，你可以用这样的方式来进行获取</p>

<pre><code>public String getDetails(
    @RequestParam(value=&quot;param1&quot;, required=true) String param1,
    @RequestParam(value=&quot;param2&quot;, required=false) String param2){
    ...
}
</code></pre>

<p>@RequestParam 支持下面四种参数
    defaultValue 如果本次请求没有携带这个参数，或者参数为空，那么就会启用默认值
    name 绑定本次参数的名称，要跟URL上面的一样
    required 这个参数是不是必须的
    value 跟name一样的作用，是name属性的一个别名</p>

<h3 id="pathvariable">@PathVariable</h3>

<p>这个注解能够识别URL里面的一个模板，我们看下面的一个URL
<a href="http://localhost:8080/springmvc/hello/101?param1=10&amp;param2=20">http://localhost:8080/springmvc/hello/101?param1=10&amp;param2=20</a>
上面的一个url你可以这样写：</p>

<pre><code>public String getDetails(
    @RequestMapping(&quot;/hello/{id}&quot;)
    public String getDetails(@PathVariable(value=&quot;id&quot;) String id,
    @RequestParam(value=&quot;param1&quot;, required=true) String param1,
    @RequestParam(value=&quot;param2&quot;, required=false) String param2){
    ...
}
</code></pre>

<p>区别很明显了</p>

<h2 id="常用注解">常用注解</h2>

<table>
<thead>
<tr>
<th align="left">注解</th>
<th align="left">描述</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">@Component</td>
<td align="left">泛指组件，类似在xml中配置bean <bean id="beanId" class="包名.类名"></td>
</tr>

<tr>
<td align="left">@Configuration</td>
<td align="left">把类作为一个IoC容器，它的某个方法头上如果注册了@Bean，就会作为这个Spring容器中的Bean。</td>
</tr>

<tr>
<td align="left">@Repository</td>
<td align="left">用于标注数据访问组件</td>
</tr>

<tr>
<td align="left">@Service</td>
<td align="left">用于标注业务层组件,默认bean的id为类名且首字母小写</td>
</tr>

<tr>
<td align="left">@Controller</td>
<td align="left">用于标注控制层组件</td>
</tr>

<tr>
<td align="left">@RestController</td>
<td align="left">spring4.0之后，@controller和@responsebody的结合</td>
</tr>

<tr>
<td align="left">@Scope</td>
<td align="left">作用域 表示将Action的范围声明为原型，可以利用容器的scope=&ldquo;prototype&rdquo;来保证每一个请求有一个单独的Action来处理，避免struts中Action的线程安全问题。spring默认scope是单例模式(scope=&ldquo;singleton&rdquo;)，这样只会创建一个Action对象，每次访问都是同一Action对象，数据不安全，struts2是要求每次次访问都对应不同的Action，scope=&ldquo;prototype&rdquo;可以保证当有请求的时候都创建一个Action对象。</td>
</tr>

<tr>
<td align="left">@Lazy(true)</td>
<td align="left">延迟初始化</td>
</tr>

<tr>
<td align="left">@RequestMapping</td>
<td align="left">用来处理请求地址映射的注解，可用于类或方法上。用于类上，表示类中的所有响应请求的方法都是以该地址作为父路径。value：指定请求的实际地址；method：指定请求的method类型，GET、POST、PUT、DELETE等（Spring4.3中引进了｛@GetMapping、@PostMapping、@PutMapping、@DeleteMapping、@PatchMapping｝，来帮助简化常用的HTTP方法的映射）</td>
</tr>

<tr>
<td align="left">@ResponseBody</td>
<td align="left">将controller的方法返回的对象通过适当的转换器转换为指定的格式之后，写入到response对象的body区，通常用来返回JSON数据或者是XML数据。使用此注解之后不会再走视图处理器，而是直接将数据写入到输入流中，效果等同于通过response对象输出指定格式的数据 效果等同于如下代码：@RequestMapping(&ldquo;/login&rdquo;)   public void login(User user, HttpServletResponse response){  response.getWriter.write(JSONObject.fromObject(user).toString());  }</td>
</tr>

<tr>
<td align="left">@PostConstruct</td>
<td align="left">初始化注解,用于指定初始化方法（用在方法上）</td>
</tr>

<tr>
<td align="left">@PreDestory</td>
<td align="left">用于指定销毁方法（用在方法上）</td>
</tr>

<tr>
<td align="left">@DependsOn</td>
<td align="left">定义Bean初始化及销毁时的顺序</td>
</tr>

<tr>
<td align="left">@Primary</td>
<td align="left">自动装配时当出现多个Bean候选者时，被注解为@Primary的Bean将作为首选者，否则将抛出异常</td>
</tr>

<tr>
<td align="left">@Autowired</td>
<td align="left">默认按类型装配，如果我们想使用按名称装配，可以结合@Qualifier注解一起使用</td>
</tr>

<tr>
<td align="left">@Resource</td>
<td align="left">默认按名称装配,当找不到与名称匹配的bean才会按类型装配</td>
</tr>

<tr>
<td align="left">@Async</td>
<td align="left">异步方法调用</td>
</tr>

<tr>
<td align="left">@RequestParam</td>
<td align="left">接收参数,从request里面拿取值</td>
</tr>

<tr>
<td align="left">@PathVariable</td>
<td align="left">接收参数,从一个URI模板里面来填充</td>
</tr>

<tr>
<td align="left">@PathParam</td>
<td align="left">这个注解是和spring的pathVariable是一样的，也是基于模板的，但是这个是jboss包下面的一个实现，上面的是spring的一个实现，都要导包</td>
</tr>

<tr>
<td align="left">@QueryParam</td>
<td align="left">JAX-RS 提供的，和Spring的RequestParam作用一致</td>
</tr>

<tr>
<td align="left">@RequestBody</td>
<td align="left">一般是post请求的时候才会使用这个请求，把参数丢在requestbody里面</td>
</tr>
</tbody>
</table>


  
  


</div>
<div class="footer gradient-2">
  <div class="container footer-container ">
    <div class="row">
      <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
        <div class="footer-title">网站导航</div>
        <ul class="list-unstyled">
            
              
                <li><a href="https://ianeiu.github.io/tags/">标签</a></li>
              
              
                <li><a href="https://ianeiu.github.io/categories/">分类</a></li>
              
            
            
            
            <li><a rel="alternate" type="application/rss&#43;xml" href="https://ianeiu.github.io/index.xml"><i class="fas fa-rss-square"></i> RSS 订阅</a></li>
            
            
        </ul>
      </div>
      <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
        
        <div class="footer-title">社交</div>
        <ul class="list-unstyled">
          
          <li><a href="https://github.com/ianeiu" rel="noopener" target="_blank">GitHub</a></li>
          
        </ul>
        
      </div>
      <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
        
        <div class="footer-title">链接</div>
        <ul class="list-unstyled">
          
          <li><a href="https://github.com/ianeiu" rel="noopener" target="_blank">关于我</a></li>
          
        </ul>
        
      </div> 
      <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">
        <p class="pull-right text-right">
          <small><em>Proudly powered by <a href="https://gohugo.io/" rel="noopener" target="_blank">Hugo</a></em></small><br/>
          <small><em>Theme - <a href="https://github.com/shaform/hugo-theme-den" rel="noopener" target="_blank">Den</a></em></small><br/>
          <small>
            &copy; 
            WuWeiMian
            2018
          </small>
          
        </p>
      </div>
    </div>
  </div>
</div>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
 <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
</body>
</html>
